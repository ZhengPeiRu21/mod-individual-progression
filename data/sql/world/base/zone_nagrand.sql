-- fix The Ring of Blood: The Final Challenge - Mogor was resurrecting with 1% health
DELETE FROM `smart_scripts` WHERE `source_type` = 9 AND `entryorguid` = 1806902;
INSERT INTO `smart_scripts` (`entryorguid`, `source_type`, `id`, `link`, `event_type`, `event_phase_mask`, `event_chance`, `event_flags`, 
`event_param1`, `event_param2`, `event_param3`, `event_param4`, `event_param5`, `event_param6`, 
`action_type`, `action_param1`, `action_param2`, `action_param3`, `action_param4`, `action_param5`, `action_param6`, 
`target_type`, `target_param1`, `target_param2`, `target_param3`, `target_param4`, `target_x`, `target_y`, `target_z`, `target_o`, `comment`) VALUES 
--
(1806902,9,0,0,0,0,100,0,0,0,0,0,0,0,41,0,0,0,0,0,0,11,12141,50,0,0,0,0,0,0,          'Mogor - Actionlist - Despawn Instant'),
(1806902,9,1,0,0,0,100,0,0,0,0,0,0,0,27,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,                'Mogor - Actionlist - Missing comment for action_type 27'),
(1806902,9,2,0,0,0,100,0,0,0,0,0,0,0,28,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,                'Mogor - Actionlist - Remove All Auras'),
(1806902,9,3,0,0,0,100,0,0,0,0,0,0,0,11,31261,1,0,0,0,0,1,0,0,0,0,0,0,0,0,            'Mogor - Actionlist - Cast \'Permanent Feign Death (Root)\''),
(1806902,9,4,5,0,0,100,0,6000,6000,0,0,0,0,11,32343,0,0,0,0,0,1,0,0,0,0,0,0,0,0,      'Mogor - Actionlist - Cast \'Revive Self\''),
(1806902,9,5,0,61,0,100,0,0,0,0,0,0,0,142,100,0,0,0,0,0,1,0,0,0,0,0,0,0,0,            'Mogor - Actionlist - Heal'),
(1806902,9,6,0,0,0,100,0,2400,2400,0,0,0,0,28,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,          'Mogor - Actionlist - Remove All Auras'),
(1806902,9,7,0,0,0,100,0,1200,1200,0,0,0,0,11,28747,0,0,0,0,0,1,0,0,0,0,0,0,0,0,      'Mogor - Actionlist - Cast \'Frenzy\''),
(1806902,9,8,0,0,0,100,0,0,0,0,0,0,0,49,0,0,0,0,0,0,12,1,0,0,0,0,0,0,0,               'Mogor - Actionlist - Start Attacking'),
(1806902,9,9,0,0,0,100,0,0,0,0,0,0,0,1,6,0,1,0,0,0,12,1,0,0,0,0,0,0,0,                'Mogor - Actionlist - Say Line 6'),
(1806902,9,10,0,0,0,100,0,0,0,0,0,0,0,42,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,               'Mogor - Actionlist - Reset Invincibility Hp');

-- fix drop rate flawless greater windroc beak / aged clefthoof blubber
UPDATE `creature_loot_template` SET `Chance` = 20 WHERE `Item` IN (28667, 28668);

SET @CGUID   := 670000;
SET @WPID    := 6700000;

-- add kodo corpses near the Greater Windrocs
DELETE FROM `creature` WHERE `guid` BETWEEN @CGUID+1 AND @CGUID+6;
DELETE FROM `creature` WHERE `guid` IN (59582, 60208);
DELETE FROM `creature` WHERE `id1`  IN (23022); -- needed to remove creature placed by AC
INSERT INTO `creature` (`guid`, `id1`, `id2`, `id3`, `map`, `zoneId`, `areaId`, `spawnMask`, `phaseMask`, `equipment_id`, `position_x`, `position_y`, `position_z`, `orientation`, `spawntimesecs`, 
`wander_distance`, `currentwaypoint`, `curhealth`, `curmana`, `MovementType`, `npcflag`, `unit_flags`, `dynamicflags`, `ScriptName`, `VerifiedBuild`, `CreateObject`, `Comment`) VALUES
--
(@CGUID+1, 17133, 0, 0, 530, 0, 0, 1, 1, 0, -1179.0300, 8585.5195, 35.3682, 2.7576, 300, 0, 0, 1, 0, 0, 0, 0, 0, '', NULL, 0, NULL),
(@CGUID+2, 17133, 0, 0, 530, 0, 0, 1, 1, 0, -1016.1700, 8313.7002, 16.7102, 5.0091, 300, 0, 0, 1, 0, 0, 0, 0, 0, '', NULL, 0, NULL),
(@CGUID+3, 17133, 0, 0, 530, 0, 0, 1, 1, 0, -918.2130, 8454.0098, 36.3233, 3.3510, 300, 0, 0, 1, 0, 0, 0, 0, 0, '', NULL, 0, NULL),
(@CGUID+4, 17133, 0, 0, 530, 0, 0, 1, 1, 0, -781.6080, 8482.6299, 40.5285, 5.8294, 300, 0, 0, 1, 0, 0, 0, 0, 0, '', NULL, 0, NULL),
--
(@CGUID+5, 23022, 0, 0, 530, 0, 0, 1, 1, 0, -1529.1022, 5971.2354, 192.3297, 0, 300, 0, 1, 27945, 6310, 2, 0, 0, 0, '', 0, 0, NULL),
(@CGUID+6, 23022, 0, 0, 530, 0, 0, 1, 1, 0, -1337.0262, 5707.4595, 180.8865, 0, 300, 0, 1, 27945, 6310, 2, 0, 0, 0, '', 0, 0, NULL),
-- misplaced
(59582, 17129, 0, 0, 530, 0, 0, 1, 1, 0, -788.8040, 8474.4004, 44.6907, 2.3430, 300, 5, 0, 1, 0, 1, 0, 0, 0, '', NULL, 0, NULL),
(60208, 17146, 0, 0, 530, 0, 0, 1, 1, 0, -3014.7700, 6524.4902, 99.2735, 2.9321, 300, 0, 0, 1, 0, 0, 0, 0, 0, '', NULL, 0, NULL);

-- feign death kodos
DELETE FROM `creature_addon` WHERE `guid` BETWEEN @CGUID+1 AND @CGUID+4;
INSERT INTO `creature_addon` (`guid`, `path_id`, `mount`, `bytes1`, `bytes2`, `emote`, `visibilityDistanceType`, `auras`) VALUES 
(@CGUID+1, 0, 0, 7, 0, 65, 0, NULL),
(@CGUID+2, 0, 0, 7, 0, 65, 0, NULL),
(@CGUID+3, 0, 0, 7, 0, 65, 0, NULL),
(@CGUID+4, 0, 0, 7, 0, 65, 0, NULL);

-- fix movement for Gutripper and Bach'lor
UPDATE `creature` SET `MovementType` = 2, `currentwaypoint` = 1, `position_x` = -1099.5699, `position_y` = 8582.3896, `position_z` = 46.3612 WHERE `id1` = 18257; -- Gutripper
UPDATE `creature` SET `MovementType` = 2, `currentwaypoint` = 1, `position_x` = -1915, `position_y` = 8854, `position_z` = 30.8850           WHERE `id1` = 18258; -- Bach'lor

DELETE FROM `creature_template_movement` WHERE `CreatureId` IN (18257, 18258);
INSERT INTO `creature_template_movement` (`CreatureId`, `Ground`, `Swim`, `Flight`, `Rooted`, `Chase`, `Random`, `InteractionPauseTimer`) VALUES 
(18257, 1, 1, 1, 0, 0, 0, NULL),
(18258, 1, 1, 0, 0, 0, 0, NULL);

DELETE FROM `creature_addon` WHERE `guid` IN (@CGUID+5, @CGUID+6, 65525, 65528);
INSERT INTO `creature_addon` (`guid`, `path_id`, `mount`, `bytes1`, `bytes2`, `emote`, `visibilityDistanceType`, `auras`) VALUES 
(@CGUID+5, @WPID+50, 0, 0, 0, 0, 0, ''),
(@CGUID+6, @WPID+60, 0, 0, 0, 0, 0, ''),
(65525, 655250, 0, 0, 0, 0, 0, ''), -- Gutripper
(65528, 655280, 0, 0, 0, 0, 0, ''); -- Bach'lor

DELETE FROM `waypoint_data` WHERE `id` IN (@WPID+50, @WPID+60, 655250, 655280);
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `action`, `action_chance`, `wpguid`) VALUES 
--
(@WPID+50, 1, -1529.1, 5971.24, 192.33, 0, 0, 0, 0, 100, 0),
(@WPID+50, 2, -1521.51, 5957.25, 193.641, 0, 0, 0, 0, 100, 0),
(@WPID+50, 3, -1515.27, 5940.26, 194.593, 0, 0, 0, 0, 100, 0),
(@WPID+50, 4, -1501.01, 5922.79, 194.599, 0, 0, 0, 0, 100, 0),
(@WPID+50, 5, -1479.96, 5914.02, 195.544, 0, 0, 0, 0, 100, 0),
(@WPID+50, 6, -1458.55, 5917.25, 194.75, 0, 0, 0, 0, 100, 0),
(@WPID+50, 7, -1437.51, 5908.63, 193.411, 0, 0, 0, 0, 100, 0),
(@WPID+50, 8, -1413.04, 5889.4, 187.326, 0, 1000, 0, 0, 100, 0),
(@WPID+50, 9, -1458.55, 5917.25, 194.75, 0, 0, 0, 0, 100, 0),
(@WPID+50, 10, -1501.01, 5922.79, 194.599, 0, 0, 0, 0, 100, 0),
--
(@WPID+60, 1, -1337.03, 5707.46, 180.886, 0, 1000, 0, 0, 100, 0),
(@WPID+60, 2, -1333.27, 5731.09, 180.424, 0, 0, 0, 0, 100, 0),
(@WPID+60, 3, -1332.24, 5754.8, 182.023, 0, 0, 0, 0, 100, 0),
(@WPID+60, 4, -1330.81, 5779.44, 182.903, 0, 0, 0, 0, 100, 0),
(@WPID+60, 5, -1324.87, 5800.58, 184.493, 0, 0, 0, 0, 100, 0),
(@WPID+60, 6, -1350.48, 5824.88, 186.404, 0, 0, 0, 0, 100, 0),
(@WPID+60, 7, -1385.07, 5843.76, 185.519, 0, 1000, 0, 0, 100, 0),
(@WPID+60, 8, -1324.87, 5800.58, 184.493, 0, 0, 0, 0, 100, 0),
--
(655250, 1, -1091.72, 8560.97, 66.4831, 0, 0, 0, 0, 100, 0),
(655250, 2, -1068.59, 8521.24, 80.7095, 0, 0, 0, 0, 100, 0),
(655250, 3, -1037.99, 8498.13, 80.7095, 0, 0, 0, 0, 100, 0),
(655250, 4, -996.698, 8472.18, 80.7095, 0, 0, 0, 0, 100, 0),
(655250, 5, -973.052, 8482.62, 66.3484, 0, 0, 0, 0, 100, 0),
(655250, 6, -957.331, 8491.59, 66.3484, 0, 0, 0, 0, 100, 0),
(655250, 7, -909.873, 8486.53, 66.3484, 0, 0, 0, 0, 100, 0),
(655250, 8, -879.482, 8484.6, 79.0706, 0, 0, 0, 0, 100, 0),
(655250, 9, -862.906, 8491.32, 72.4317, 0, 0, 0, 0, 100, 0),
(655250, 10, -829.308, 8489.9, 58.6262, 0, 0, 0, 0, 100, 0),
(655250, 11, -789.25, 8482.48, 58.6262, 0, 0, 0, 0, 100, 0),
(655250, 12, -743.646, 8479.96, 56.6817, 0, 0, 0, 0, 100, 0),
(655250, 13, -704.658, 8451.3, 58.6262, 0, 0, 0, 0, 100, 0),
(655250, 14, -695.855, 8407.75, 58.6262, 0, 0, 0, 0, 100, 0),
(655250, 15, -683.444, 8369.08, 68.5984, 0, 0, 0, 0, 100, 0), -- script
(655250, 16, -675.244, 8347.02, 79.5706, 0, 0, 0, 0, 100, 0),
(655250, 17, -664.645, 8320.78, 96.4857, 0, 0, 0, 0, 100, 0),
(655250, 18, -669.768, 8272.64, 96.4857, 0, 0, 0, 0, 100, 0),
(655250, 19, -709.106, 8251.63, 116.319, 0, 0, 0, 0, 100, 0),
(655250, 20, -727.922, 8260.33, 121.319, 0, 0, 0, 0, 100, 0),
(655250, 21, -761.916, 8274.64, 116.319, 0, 0, 0, 0, 100, 0),
(655250, 22, -807.93, 8283.22, 116.319, 0, 0, 0, 0, 100, 0),
(655250, 23, -845.847, 8314.61, 116.319, 0, 0, 0, 0, 100, 0),
(655250, 24, -868.622, 8345.56, 107.013, 0, 0, 0, 0, 100, 0),
(655250, 25, -891.048, 8368.04, 93.9024, 0, 0, 0, 0, 100, 0),
(655250, 26, -916.754, 8387.28, 93.9024, 0, 0, 0, 0, 100, 0),
(655250, 27, -945.406, 8411.37, 78.708, 0, 0, 0, 0, 100, 0),
(655250, 28, -979.343, 8437.67, 78.708, 0, 0, 0, 0, 100, 0),
(655250, 29, -1002.01, 8466.42, 78.708, 0, 0, 0, 0, 100, 0),
(655250, 30, -1041.51, 8489.17, 96.8746, 0, 0, 0, 0, 100, 0),
(655250, 31, -1054.97, 8503.23, 96.8746, 0, 0, 0, 0, 100, 0),
(655250, 32, -1068.45, 8534.05, 95.3191, 0, 0, 0, 0, 100, 0),
(655250, 33, -1095.47, 8570.79, 75.4024, 0, 0, 0, 0, 100, 0), -- script
--
(655280, 1, -1853.32, 8843.79, 30.0997, 0, 0, 0, 0, 100, 0),
(655280, 2, -1807.56, 8834.99, 29.2595, 0, 0, 0, 0, 100, 0),
(655280, 3, -1778.89, 8832.21, 28.8318, 0, 5000, 0, 0, 100, 0),
(655280, 4, -1750.33, 8825.29, 33.64, 0, 0, 0, 0, 100, 0),
(655280, 5, -1736.21, 8821.91, 36.27, 0, 0, 0, 0, 100, 0),
(655280, 6, -1722.28, 8819.48, 33.3289, 0, 0, 0, 0, 100, 0),
(655280, 7, -1702.28, 8815.27, 33.3215, 0, 0, 0, 0, 100, 0),
(655280, 8, -1679.72, 8809.79, 37.9979, 0, 0, 0, 0, 100, 0),
(655280, 9, -1665.33, 8807.19, 38.865, 0, 0, 0, 0, 100, 0),
(655280, 10, -1627.73, 8792.1, 36.8225, 0, 5000, 0, 0, 100, 0),
(655280, 11, -1627.73, 8792.1, 36.8225, 0, 0, 0, 0, 100, 0),
(655280, 12, -1589.28, 8776.05, 31.0817, 0, 0, 0, 0, 100, 0),
(655280, 13, -1544.21, 8763.72, 33.0589, 0, 0, 0, 0, 100, 0),
(655280, 14, -1517.92, 8760.38, 28.7265, 0, 0, 0, 0, 100, 0),
(655280, 15, -1517.92, 8760.38, 28.7265, 0, 0, 0, 0, 100, 0),
(655280, 16, -1470.43, 8750.48, 28.0288, 0, 5000, 0, 0, 100, 0),
(655280, 17, -1425.19, 8726.87, 21.7158, 0, 0, 0, 0, 100, 0),
(655280, 18, -1395.23, 8717.94, 23.6657, 0, 0, 0, 0, 100, 0),
(655280, 19, -1365.8, 8700.39, 28.4882, 0, 0, 0, 0, 100, 0),
(655280, 20, -1365.8, 8700.39, 28.4882, 0, 0, 0, 0, 100, 0),
(655280, 21, -1347.92, 8663.28, 24.9401, 0, 0, 0, 0, 100, 0),
(655280, 22, -1352.99, 8628.97, 25.1234, 0, 0, 0, 0, 100, 0),
(655280, 23, -1345.75, 8602.56, 22.7522, 0, 0, 0, 0, 100, 0),
(655280, 24, -1332.21, 8590, 19.7613, 0, 0, 0, 0, 100, 0),
(655280, 25, -1288.52, 8597.4, 22.4054, 0, 0, 0, 0, 100, 0),
(655280, 26, -1247.69, 8631.38, 32.358, 0, 0, 0, 0, 100, 0),
(655280, 27, -1247.69, 8631.38, 32.358, 0, 0, 0, 0, 100, 0),
(655280, 28, -1247.69, 8631.38, 32.358, 0, 5000, 0, 0, 100, 0),
(655280, 29, -1221.92, 8669.44, 38.759, 0, 0, 0, 0, 100, 0),
(655280, 30, -1230.99, 8689.39, 37.4873, 0, 0, 0, 0, 100, 0),
(655280, 31, -1246.52, 8711.41, 34.5571, 0, 0, 0, 0, 100, 0),
(655280, 32, -1264.72, 8731.36, 32.453, 0, 0, 0, 0, 100, 0),
(655280, 33, -1283.21, 8742.08, 35.1921, 0, 0, 0, 0, 100, 0),
(655280, 34, -1302.94, 8740.64, 34.1554, 0, 0, 0, 0, 100, 0),
(655280, 35, -1328.93, 8730.21, 29.988, 0, 0, 0, 0, 100, 0),
(655280, 36, -1359.77, 8736.24, 28.6292, 0, 0, 0, 0, 100, 0),
(655280, 37, -1374.58, 8757.73, 31.2344, 0, 5000, 0, 0, 100, 0),
(655280, 38, -1378.19, 8802.87, 34.4092, 0, 0, 0, 0, 100, 0),
(655280, 39, -1396.67, 8830.66, 29.1786, 0, 0, 0, 0, 100, 0),
(655280, 40, -1415.89, 8849.03, 32.9179, 0, 0, 0, 0, 100, 0),
(655280, 41, -1439.05, 8862.96, 37.7159, 0, 0, 0, 0, 100, 0),
(655280, 42, -1457.39, 8872.23, 37.3876, 0, 0, 0, 0, 100, 0),
(655280, 43, -1481.63, 8894.11, 41.1984, 0, 0, 0, 0, 100, 0),
(655280, 44, -1491.28, 8909.66, 43.6029, 0, 0, 0, 0, 100, 0),
(655280, 45, -1505.11, 8929.37, 42.0836, 0, 0, 0, 0, 100, 0),
(655280, 46, -1519.29, 8943.56, 38.28, 0, 0, 0, 0, 100, 0),
(655280, 47, -1519.29, 8943.56, 38.28, 0, 0, 0, 0, 100, 0),
(655280, 48, -1581.56, 8968.29, 39.1789, 0, 0, 0, 0, 100, 0),
(655280, 49, -1619.78, 8971.95, 41.2737, 0, 0, 0, 0, 100, 0),
(655280, 50, -1655.18, 8964.68, 43.4279, 0, 0, 0, 0, 100, 0),
(655280, 51, -1678.58, 8957.2, 39.4291, 0, 0, 0, 0, 100, 0),
(655280, 52, -1721.1, 8963.63, 48.2463, 0, 0, 0, 0, 100, 0),
(655280, 53, -1759.58, 8971.58, 58.4921, 0, 0, 0, 0, 100, 0),
(655280, 54, -1763.97, 8972.37, 58.6278, 0, 0, 0, 0, 100, 0),
(655280, 55, -1759.46, 8944.18, 58.3036, 0, 0, 0, 0, 100, 0),
(655280, 56, -1759.46, 8944.18, 58.3036, 0, 0, 0, 0, 100, 0),
(655280, 57, -1759.46, 8944.18, 58.3036, 0, 5000, 0, 0, 100, 0),
(655280, 58, -1782.38, 8980.54, 54.589, 0, 0, 0, 0, 100, 0),
(655280, 59, -1794.69, 8981.32, 50.3973, 0, 0, 0, 0, 100, 0),
(655280, 60, -1809.13, 8982.4, 46.1651, 0, 0, 0, 0, 100, 0),
(655280, 61, -1815.58, 8976.12, 41.7977, 0, 0, 0, 0, 100, 0),
(655280, 62, -1830.36, 8948.43, 39.7659, 0, 0, 0, 0, 100, 0),
(655280, 63, -1849.44, 8918.3, 37.4994, 0, 0, 0, 0, 100, 0),
(655280, 64, -1853.8, 8911.71, 37.2204, 0, 0, 0, 0, 100, 0),
(655280, 65, -1900.89, 8888.02, 37.0238, 0, 0, 0, 0, 100, 0),
(655280, 66, -1904.16, 8887.94, 37.1452, 0, 0, 0, 0, 100, 0),
(655280, 67, -1947.18, 8879.73, 36.1108, 0, 5000, 0, 0, 100, 0);
